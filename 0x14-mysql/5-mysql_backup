#!/usr/bin/env bash
# A bash script that creates a MySQL dump of all databases
#+ and compresses it into a tar.gz archive.

# Ensure exactly one argument is provided (the MySQL root password)
if [ "$#" -ne 1 ]; then
    echo "Usage: $0 <mysql_root_password>"
    exit 1
fi

MYSQL_PASSWORD="$1"

# Create a dump of all MySQL databases and save it as backup.sql
mysqldump --all-databases -u root -p"$MYSQL_PASSWORD" > backup.sql

# Create a tar.gz archive with the current day-month-year as its name
ARCHIVE_NAME="$(date +'%d-%m-%Y').tar.gz"
tar -czf "$ARCHIVE_NAME" backup.sql
